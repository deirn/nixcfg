#!/usr/bin/env bash

# Wrapper script to run programs with VcXsrv.
# VcXsrv runs better on certain GUI programs,
# and also uses native window decoration.

if [ "$(systemd-detect-virt)" != "wsl" ]; then
    echo "Only for WSL"
fi

export DISPLAY="$(ip route list default | awk '{print $3}'):0"
export LIBGL_ALWAYS_INDIRECT=true
export LIBGL_ALWAYS_SOFTWARE=true

$@
